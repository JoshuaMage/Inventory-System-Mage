import{s as et,o as tt,b as lt,d as at,n as Fe,r as st}from"../chunks/scheduler.CXfhjvOk.js";import{S as rt,i as ot,e as s,s as k,u as We,c as r,a as n,f as y,v as Xe,d as a,l as f,g as Me,h as t,w as Ye,y as Ve,A as nt,x as Ce,z as Ze,B as ut,o as xe,C as it,t as N,b as S,r as ct,k as ht,m as Be,n as He,j as _e}from"../chunks/index.WVNcM1CQ.js";import{e as qe}from"../chunks/each.CxRJsNaj.js";import{r as Ae,o as ft,s as ze,d as Ge}from"../chunks/firebaseConfig.DxRc-Brs.js";import{P as _t,S as dt}from"../chunks/Pagination.Br2EK98U.js";function Je(e,l,o){const u=e.slice();return u[18]=l[o],u[19]=l,u[20]=o,u}function pt(e){let l,o,u,d,U,L,i,E,p,Q,m,b,g,B,Y,z,H,A,J,G,h,I,w,D,K,he,Z,C,j,ne,ue,te,R,O,ie,le,q,M,fe,W,$,ae,ce,se,F,X,re,oe;function de(v){e[13](v)}let pe={};e[0]!==void 0&&(pe.searchItem=e[0]),d=new dt({props:pe}),lt.push(()=>it(d,"searchItem",de));let x=qe(e[5]),P=[];for(let v=0;v<x.length;v+=1)P[v]=Ke(Je(e,x,v));return{c(){l=s("div"),o=s("div"),u=s("div"),We(d.$$.fragment),L=k(),i=s("ul"),E=s("li"),p=s("button"),Q=N("Item"),m=k(),b=s("li"),g=s("button"),B=N("Material Name"),Y=k(),z=s("li"),H=s("button"),A=N("Unit"),J=k(),G=s("li"),h=s("button"),I=N("Purchase Qty"),w=k(),D=s("li"),K=s("button"),he=N("Stock"),Z=k(),C=s("li"),j=s("button"),ne=N("Pending"),ue=k(),te=s("li"),R=s("button"),O=N("Stock-out"),ie=k(),le=s("li"),q=s("button"),M=N("Date Stock-out"),fe=k(),W=s("li"),$=s("button"),ae=N("Sale-Qty"),ce=k(),se=s("li"),F=s("button"),X=N("Status"),re=k();for(let v=0;v<P.length;v+=1)P[v].c();this.h()},l(v){l=r(v,"DIV",{class:!0});var ee=n(l);o=r(ee,"DIV",{class:!0});var V=n(o);u=r(V,"DIV",{class:!0});var T=n(u);Xe(d.$$.fragment,T),L=y(T),i=r(T,"UL",{class:!0});var _=n(i);E=r(_,"LI",{});var c=n(E);p=r(c,"BUTTON",{class:!0});var me=n(p);Q=S(me,"Item"),me.forEach(a),c.forEach(a),m=y(_),b=r(_,"LI",{});var ve=n(b);g=r(ve,"BUTTON",{class:!0});var be=n(g);B=S(be,"Material Name"),be.forEach(a),ve.forEach(a),Y=y(_),z=r(_,"LI",{});var ge=n(z);H=r(ge,"BUTTON",{class:!0});var Ee=n(H);A=S(Ee,"Unit"),Ee.forEach(a),ge.forEach(a),J=y(_),G=r(_,"LI",{});var Ie=n(G);h=r(Ie,"BUTTON",{class:!0});var ke=n(h);I=S(ke,"Purchase Qty"),ke.forEach(a),Ie.forEach(a),w=y(_),D=r(_,"LI",{});var ye=n(D);K=r(ye,"BUTTON",{class:!0});var Le=n(K);he=S(Le,"Stock"),Le.forEach(a),ye.forEach(a),Z=y(_),C=r(_,"LI",{});var Pe=n(C);j=r(Pe,"BUTTON",{class:!0});var Te=n(j);ne=S(Te,"Pending"),Te.forEach(a),Pe.forEach(a),ue=y(_),te=r(_,"LI",{});var De=n(te);R=r(De,"BUTTON",{class:!0});var Ne=n(R);O=S(Ne,"Stock-out"),Ne.forEach(a),De.forEach(a),ie=y(_),le=r(_,"LI",{});var Se=n(le);q=r(Se,"BUTTON",{class:!0});var we=n(q);M=S(we,"Date Stock-out"),we.forEach(a),Se.forEach(a),fe=y(_),W=r(_,"LI",{});var Oe=n(W);$=r(Oe,"BUTTON",{class:!0});var Ue=n($);ae=S(Ue,"Sale-Qty"),Ue.forEach(a),Oe.forEach(a),ce=y(_),se=r(_,"LI",{});var Qe=n(se);F=r(Qe,"BUTTON",{class:!0});var Re=n(F);X=S(Re,"Status"),Re.forEach(a),Qe.forEach(a),_.forEach(a),T.forEach(a),re=y(V);for(let $e=0;$e<P.length;$e+=1)P[$e].l(V);V.forEach(a),ee.forEach(a),this.h()},h(){f(p,"class",e[10]()),f(g,"class",e[10]()),f(H,"class",e[10]()),f(h,"class",e[10]()),f(K,"class",e[10]()),f(j,"class",e[10]()),f(R,"class",e[10]()),f(q,"class",e[10]()),f($,"class",e[10]()),f(F,"class",e[10]()),f(i,"class","flex bg-bgGrey font-extrabold text-white"),f(u,"class","bg-bgGrey"),f(o,"class","flex flex-col font-patrick"),f(l,"class","overflow-auto rounded-lg shadow hidden md:block bg-white mt-24")},m(v,ee){Me(v,l,ee),t(l,o),t(o,u),Ye(d,u,null),t(u,L),t(u,i),t(i,E),t(E,p),t(p,Q),t(i,m),t(i,b),t(b,g),t(g,B),t(i,Y),t(i,z),t(z,H),t(H,A),t(i,J),t(i,G),t(G,h),t(h,I),t(i,w),t(i,D),t(D,K),t(K,he),t(i,Z),t(i,C),t(C,j),t(j,ne),t(i,ue),t(i,te),t(te,R),t(R,O),t(i,ie),t(i,le),t(le,q),t(q,M),t(i,fe),t(i,W),t(W,$),t($,ae),t(i,ce),t(i,se),t(se,F),t(F,X),t(o,re);for(let V=0;V<P.length;V+=1)P[V]&&P[V].m(o,null);oe=!0},p(v,ee){const V={};if(!U&&ee&1&&(U=!0,V.searchItem=v[0],at(()=>U=!1)),d.$set(V),ee&1452){x=qe(v[5]);let T;for(T=0;T<x.length;T+=1){const _=Je(v,x,T);P[T]?P[T].p(_,ee):(P[T]=Ke(_),P[T].c(),P[T].m(o,null))}for(;T<P.length;T+=1)P[T].d(1);P.length=x.length}},i(v){oe||(Ce(d.$$.fragment,v),oe=!0)},o(v){Ve(d.$$.fragment,v),oe=!1},d(v){v&&a(l),Ze(d),ct(P,v)}}}function mt(e){let l,o='<p class="bg-white text-xl font-black">Loading please wait....</p>';return{c(){l=s("div"),l.innerHTML=o,this.h()},l(u){l=r(u,"DIV",{class:!0,"data-svelte-h":!0}),ht(l)!=="svelte-93be4p"&&(l.innerHTML=o),this.h()},h(){f(l,"class","flex justify-center items-center h-screen bg-bgDarkGrey")},m(u,d){Me(u,l,d)},p:Fe,i:Fe,o:Fe,d(u){u&&a(l)}}}function Ke(e){let l,o,u,d=e[20]+1+"",U,L,i,E,p=e[18].materialName+"",Q,m,b,g,B=e[18].unit+"",Y,z,H,A,J=e[18].orderQty+"",G,h,I,w,D=(e[18].status==="Arrive"?e[18].orderQty:0)-e[2][e[20]]+"",K,he,Z,C,j=(e[18].status==="Pending"||e[18].status==="Delay"?e[18].orderQty:0)+"",ne,ue,te,R,O,ie,le,q,M,fe,W,$,ae=e[2][e[20]]+"",ce,se,F,X,re=e[18].status+"",oe,de,pe,x,P;function v(){e[14].call(O,e[20])}function ee(){return e[15](e[20])}function V(){e[16].call(M,e[20])}function T(..._){return e[17](e[20],..._)}return{c(){l=s("ul"),o=s("li"),u=s("h4"),U=N(d),L=k(),i=s("li"),E=s("h4"),Q=N(p),m=k(),b=s("li"),g=s("h4"),Y=N(B),z=k(),H=s("li"),A=s("h4"),G=N(J),h=k(),I=s("li"),w=s("h4"),K=N(D),he=k(),Z=s("li"),C=s("h4"),ne=N(j),te=k(),R=s("li"),O=s("input"),le=k(),q=s("li"),M=s("input"),fe=k(),W=s("li"),$=s("h4"),ce=N(ae),se=k(),F=s("li"),X=s("h4"),oe=N(re),pe=k(),this.h()},l(_){l=r(_,"UL",{class:!0});var c=n(l);o=r(c,"LI",{});var me=n(o);u=r(me,"H4",{class:!0});var ve=n(u);U=S(ve,d),ve.forEach(a),me.forEach(a),L=y(c),i=r(c,"LI",{});var be=n(i);E=r(be,"H4",{class:!0});var ge=n(E);Q=S(ge,p),ge.forEach(a),be.forEach(a),m=y(c),b=r(c,"LI",{});var Ee=n(b);g=r(Ee,"H4",{class:!0});var Ie=n(g);Y=S(Ie,B),Ie.forEach(a),Ee.forEach(a),z=y(c),H=r(c,"LI",{});var ke=n(H);A=r(ke,"H4",{class:!0});var ye=n(A);G=S(ye,J),ye.forEach(a),ke.forEach(a),h=y(c),I=r(c,"LI",{});var Le=n(I);w=r(Le,"H4",{class:!0});var Pe=n(w);K=S(Pe,D),Pe.forEach(a),Le.forEach(a),he=y(c),Z=r(c,"LI",{class:!0});var Te=n(Z);C=r(Te,"H4",{class:!0});var De=n(C);ne=S(De,j),De.forEach(a),Te.forEach(a),te=y(c),R=r(c,"LI",{});var Ne=n(R);O=r(Ne,"INPUT",{type:!0,class:!0,max:!0}),Ne.forEach(a),le=y(c),q=r(c,"LI",{});var Se=n(q);M=r(Se,"INPUT",{type:!0}),Se.forEach(a),fe=y(c),W=r(c,"LI",{});var we=n(W);$=r(we,"H4",{class:!0});var Oe=n($);ce=S(Oe,ae),Oe.forEach(a),we.forEach(a),se=y(c),F=r(c,"LI",{class:!0});var Ue=n(F);X=r(Ue,"H4",{class:!0});var Qe=n(X);oe=S(Qe,re),Qe.forEach(a),Ue.forEach(a),pe=y(c),c.forEach(a),this.h()},h(){f(u,"class",e[10]()),f(E,"class",e[10]()),f(g,"class",e[10]()),f(A,"class",e[10]()),f(w,"class",e[10]()),f(C,"class",ue=`${e[18].status==="Pending"||e[18].status==="Delay"?"text-red-600":"text-black"}`),f(Z,"class",e[10]()),f(O,"type","number"),f(O,"class","text-center w-32"),f(O,"max",ie=e[18].orderQty),f(M,"type","date"),f($,"class",e[10]()),f(X,"class",de=`${e[18].status==="Pending"||e[18].status==="Delay"?"text-red-600":"text-black"}`),f(F,"class",e[10]()),f(l,"class","flex items-center hover:underline hover:font-semibold")},m(_,c){Me(_,l,c),t(l,o),t(o,u),t(u,U),t(l,L),t(l,i),t(i,E),t(E,Q),t(l,m),t(l,b),t(b,g),t(g,Y),t(l,z),t(l,H),t(H,A),t(A,G),t(l,h),t(l,I),t(I,w),t(w,K),t(l,he),t(l,Z),t(Z,C),t(C,ne),t(l,te),t(l,R),t(R,O),Be(O,e[2][e[20]]),t(l,le),t(l,q),t(q,M),Be(M,e[3][e[20]]),t(l,fe),t(l,W),t(W,$),t($,ce),t(l,se),t(l,F),t(F,X),t(X,oe),t(l,pe),x||(P=[He(O,"input",v),He(O,"input",ee),He(M,"input",V),He(M,"change",T)],x=!0)},p(_,c){e=_,c&32&&p!==(p=e[18].materialName+"")&&_e(Q,p),c&32&&B!==(B=e[18].unit+"")&&_e(Y,B),c&32&&J!==(J=e[18].orderQty+"")&&_e(G,J),c&36&&D!==(D=(e[18].status==="Arrive"?e[18].orderQty:0)-e[2][e[20]]+"")&&_e(K,D),c&32&&j!==(j=(e[18].status==="Pending"||e[18].status==="Delay"?e[18].orderQty:0)+"")&&_e(ne,j),c&32&&ue!==(ue=`${e[18].status==="Pending"||e[18].status==="Delay"?"text-red-600":"text-black"}`)&&f(C,"class",ue),c&32&&ie!==(ie=e[18].orderQty)&&f(O,"max",ie),c&4&&xe(O.value)!==e[2][e[20]]&&Be(O,e[2][e[20]]),c&8&&Be(M,e[3][e[20]]),c&4&&ae!==(ae=e[2][e[20]]+"")&&_e(ce,ae),c&32&&re!==(re=e[18].status+"")&&_e(oe,re),c&32&&de!==(de=`${e[18].status==="Pending"||e[18].status==="Delay"?"text-red-600":"text-black"}`)&&f(X,"class",de)},d(_){_&&a(l),x=!1,st(P)}}}function vt(e){let l,o,u,d,U,L,i;const E=[mt,pt],p=[];function Q(m,b){return m[4]?0:1}return u=Q(e),d=p[u]=E[u](e),L=new _t({props:{currentPage:e[1],totalPages:e[6],onPageChange:e[9]}}),{c(){l=s("main"),o=s("div"),d.c(),U=k(),We(L.$$.fragment),this.h()},l(m){l=r(m,"MAIN",{class:!0});var b=n(l);o=r(b,"DIV",{class:!0});var g=n(o);d.l(g),U=y(g),Xe(L.$$.fragment,g),g.forEach(a),b.forEach(a),this.h()},h(){f(o,"class","flex flex-col"),f(l,"class","flex justify-center min-h-screen bg-bgDarkGrey font-patrick text-black")},m(m,b){Me(m,l,b),t(l,o),p[u].m(o,null),t(o,U),Ye(L,o,null),i=!0},p(m,[b]){let g=u;u=Q(m),u===g?p[u].p(m,b):(ut(),Ve(p[g],1,1,()=>{p[g]=null}),nt(),d=p[u],d?d.p(m,b):(d=p[u]=E[u](m),d.c()),Ce(d,1),d.m(o,U));const B={};b&2&&(B.currentPage=m[1]),b&64&&(B.totalPages=m[6]),L.$set(B)},i(m){i||(Ce(d),Ce(L.$$.fragment,m),i=!0)},o(m){Ve(d),Ve(L.$$.fragment,m),i=!1},d(m){m&&a(l),p[u].d(),Ze(L)}}}let je=7;function bt(e,l,o){let u,d,U,L="",i=[],E=[],p=[],Q=1,m=!0;tt(()=>{const h=Ae(Ge,"outputs");ft(h,I=>{o(4,m=!1),I.exists()?(o(11,i=[]),o(2,E=[]),o(3,p=[]),I.forEach(w=>{const D=w.val();i.push(D),E.push(D.stockOut||0),p.push(localStorage.getItem(`dateStockOut_${w.key}`)||"")})):console.log("No Data available")})});function b(h){const I=parseFloat(E[h])||0;localStorage.setItem(`stockOut_${h}`,I);const w=Ae(Ge,`outputs/${h}/stockOut`);ze(w,I).then(()=>{console.log("Value updated in Firebase successfully"),o(2,E[h]=I,E)}).catch(D=>{console.error("Error updating value in Firebase:",D)})}function g(h,I){localStorage.setItem(`dateStockOut_${h}`,I);const w=Ae(Ge,`outputs/${i[h].id}/dateStockOut`);ze(w,I).then(()=>{console.log("Date updated in Firebase successfully"),o(3,p[h]=I,p)}).catch(D=>{console.error("Error updating date in Firebase:",D)})}function B(h){o(1,Q=h)}const Y=()=>"flex border border-gray-300  border-none m-0 py-4 2xl:place-content-center sm:w-14 md:w-16 lg:w-24 xl:w-28 2xl:w-32 text-center";function z(h){L=h,o(0,L)}function H(h){E[h]=xe(this.value),o(2,E)}const A=h=>b(h);function J(h){p[h]=this.value,o(3,p)}const G=(h,I)=>g(h,I.target.value);return e.$$.update=()=>{e.$$.dirty&2048&&o(6,u=Math.ceil(i.length/je)),e.$$.dirty&2049&&o(12,U=i.filter(h=>h.materialName.toLowerCase().includes(L.toLowerCase()))),e.$$.dirty&4098&&o(5,d=U.slice((Q-1)*je,Q*je))},[L,Q,E,p,m,d,u,b,g,B,Y,i,U,z,H,A,J,G]}class Lt extends rt{constructor(l){super(),ot(this,l,bt,vt,et,{})}}export{Lt as component};
